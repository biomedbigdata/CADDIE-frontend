<div class="is-hidden-mobile">
  <app-launch-analysis [(show)]="showAnalysisDialog"
                       [target]="analysisDialogTarget"
                       [dataset]="selectedDataset"
                       [selectedDataset]="selectedDataset"
                       [selectedGeneInteractionDataset]="currentGeneInteractionDataset"
                       [selectedDrugInteractionDataset]="selectedInteractionDrugDataset"
                       [currentCancerTypeItems]="currentCancerTypeItems"
                       [interactionDrugDatasetItems]="interactionDrugDatasetItems"
  >
  </app-launch-analysis>

  <app-custom-genes
    [(show)]="showCustomGenesDialog"
    [visibleNodes]="currentViewNodes"
    [currentCancerDataset]="currentDataset"
    [currentCancerTypeItems]="currentCancerTypeItems"
    (showChange)="showChangeCustomGenes"
  >
  </app-custom-genes>

  <app-add-expressed-genes [(show)]="showThresholdDialog"
                           [selectedExpressionCancerType]="currentViewSelectedExpressionCancerType"
                           [visibleNodes]="currentViewNodes"
                           [currentViewGenes]="currentViewGenes"
                           [currentViewCancerGenes]="currentViewCancerGenes"
                           [currentCancerTypeItems]="currentCancerTypeItems"
  >
  </app-add-expressed-genes>

  <app-disease-related-genes [(show)]="showDiseaseSelectionDialog"
                             (showChange)="showChangeDiseaseSelectionDialog"
                             [visibleNodes]="currentViewNodes"
                             [currentCancerDataset]="currentDataset"
                             [currentViewGenes]="currentViewGenes"
                             [currentViewCancerGenes]="currentViewCancerGenes"
                             [currentCancerTypeItems]="currentCancerTypeItems"
  >
  </app-disease-related-genes>

  <app-vcf-input
    [(show)]="showVCFInput"
    (showChange)="showChangeVCFInput"
    (triggerTemplateUpdate)="triggerTemplateUpdateVCFInput"
    [currentCancerDataset]="currentDataset"
    [currentCancerTypeItems]="currentCancerTypeItems"
  >
  </app-vcf-input>

  <div class="caddie explorer">

    <div class="caddie right-window">

      <div>
        <div class="caddie network" id="network">
          <div class="card network" id="network-card">
            <header class="card-header">
              <p class="card-header-title">Gene-Gene Interaction Network</p>
            </header>
            <div class="card-content">

              <!-- Start Detail View -->
              <div class="detail-view" *ngIf="selectedWrapper" [class.analysis-info]="selectedAnalysisToken && visibleAnalysisTab==='network'">
                <h6 class="is-6">
                  <span class="icon">
                    <i *ngIf="!selectedWrapper" class="fas fa-info" aria-hidden="true"></i>
                    <i *ngIf="selectedWrapper && selectedWrapper.type === 'Node'" class="fas fa-dna" aria-hidden="true"></i>
                    <i *ngIf="selectedWrapper && selectedWrapper.type === 'CancerNode'" class="fas fa-disease"
                       aria-hidden="true"></i>
                    <i *ngIf="selectedWrapper && selectedWrapper.type === 'Drug'" class="fas fa-capsules"
                       aria-hidden="true"></i>
                  </span>
                  <span *ngIf="!selectedWrapper">No item selected</span>
                  <span *ngIf="selectedWrapper">
                    <span *ngIf="selectedWrapper.type === 'Node'">
                      <span>
                        Gene
                      </span>
                    </span>
                    <span *ngIf="selectedWrapper.type === 'CancerNode'">
                      <span>
                        Cancer Driver Gene
                      </span>
                    </span>
                    <span *ngIf="selectedWrapper.type === 'Drug'">Drug</span>
                  </span>
                </h6>
                <app-info-tile
                  [wrapper]="selectedWrapper"
                  [wrapperCancerTypes]="selectedWrapperCancerTypes"
                  [wrapperComorbidities]="selectedWrapperComorbidities"
                  [nodeDegree]="nodeDegree"
                ></app-info-tile>
              </div>
              <!-- END Detail View -->

              <!-- START Legend -->
              <div class="legend main" [ngClass]="{'pushed-left' : selectedMutationCancerType || selectedExpressionCancerType}">
                <table>
                  <tr>
                    <td><span class="node"></span></td>
                    <td>&nbsp;Gene</td>
                  </tr>
                  <tr>
                    <td><span class="cancer-node"></span></td>
                    <td>&nbsp;Cancer Gene</td>
                  </tr>
                  <tr>
                    <td><span class="selected-cancer-node"></span></td>
                    <td>&nbsp;Selected Node</td>
                  </tr>
                </table>
              </div>
              <!-- END Legend -->

              <!-- START Gradient Legend -->
              <div class="legend main gradient" *ngIf="selectedMutationCancerType || selectedExpressionCancerType">
                <div class="color-gradient-gene bar"></div>
                <div class="color-gradient-cancer-gene bar"></div>
                <span class="annotation-max">High <br>
                  <span *ngIf="selectedMutationCancerType">Mutation</span>
                  <span *ngIf="selectedExpressionCancerType">Expression</span>
                </span>
                <span class="annotation-min">Low <br>
                  <span *ngIf="selectedMutationCancerType">Mutation</span>
                  <span *ngIf="selectedExpressionCancerType">Expression</span>
                </span>
                <div>
                  <div class="box-unknown has-background-grey-light"></div>
                  <span class="annotation-unknown">Unknown</span>
                </div>
              </div>
              <!-- END Gradient Legend -->

              <div class="card-image" id="canvas-content">
                <div class="parent">
                  <div class="network center image1" #network>
                  </div>
                  <div class="image2">
                    <!-- <img src="assets/leg1.png" width="180px"/> -->
                  </div>
                </div>
              </div>

              <footer class="card-footer toolbar network-footer-container">
                <button (click)="toCanvas()" class="button is-primary has-tooltip is-inline-block footer-buttons"
                        data-tooltip="Take a screenshot of the current network.">
                <span class="icon">
                  <i class="fas fa-camera" aria-hidden="true"></i>
                </span> <span>Screenshot</span>
                </button>

                <app-category-selector
                  [expanded]="expressionExpanded"
                  [selectedElement]="selectedTissue"
                  [elements]="analysis.getTissues()"
                  (callbackFun)="selectTissue($event)"
                  label="Tissue"
                  class="footer-buttons is-inline-block"
                ></app-category-selector>

                <app-category-selector
                  [expanded]="expressionExpanded"
                  [selectedElement]="selectedExpressionCancerType"
                  (callbackFun)="selectExpressionCancerType($event)"
                  [elements]="analysis.getExpressionCancerTypes()"
                  label="Expression"
                  class="footer-buttons is-inline-block"
                ></app-category-selector>

                <app-category-selector
                  [expanded]="mutationCancerTypesExpanded"
                  [selectedElement]="selectedMutationCancerType"
                  [elements]="analysis.getMutationCancerTypes()"
                  (callbackFun)="colorMutationGradient($event)"
                  label="Mutation"
                  class="footer-buttons is-inline-block"
                ></app-category-selector>

                <app-toggle class="footer-buttons is-inline-block"
                            textOn="Animation On"
                            textOff="Off"
                            tooltipOn="Enable the network animation."
                            tooltipOff="Disable the network animation and freeze nodes."
                            [value]="physicsEnabled"
                            (valueChange)="updatePhysicsEnabled($event)"></app-toggle>

                <app-button
                  buttonText="Fullscreen"
                  (callbackFun)="networkFullscreen()"
                  icon="fa fa-arrows"
                  class="is-inline-block footer-buttons">
                </app-button>

              </footer>
            </div>
          </div>
        </div>
      </div>

      <div class="analysis-view" *ngIf="selectedAnalysisToken">
        <app-analysis-panel [(token)]="selectedAnalysisToken"
                            (showDetailsChange)="selectedWrapper = $event; nodeDegree = $event.nodeDegree;
                            selectedWrapperComorbidities = $event.comorbidities;
                            selectedWrapperCancerTypes = $event.cancerTypes;"
                            (visibleItems)="analysisWindowChanged($event)"
                            (visibleTab)="visibleAnalysisTab = $event"
        >
        </app-analysis-panel>
      </div>
    </div>

    <div class="caddie sidebar bar-left">

      <!-- Data Selector START -->
      <div class="columns is-multiline is-centered row-data-selector">

        <div class="column is-12 has-text-centered">

          <!-- Dataset Selector START -->
          <div class="columns is-vcentered">
            <div class="column is-4 has-text-left">
              <h6 class="title is-6">Dataset: </h6>
            </div>
            <div class="column">
              <app-dataset-tile [datasetItems]="datasetItems" [selectedDataset]="selectedDataset"
                                (selectedDatasetChange)="selectedDataset = $event; initCancerTypes(selectedDataset);">
              </app-dataset-tile>
            </div>
          </div>
          <!-- Dataset Selector END -->

        </div>

        <div class="column is-12 has-text-centered">

          <!-- Data Level Toggle START -->
          <div class="columns is-vcentered">
            <div class="column is-4 has-text-left">
              <h6 class="title is-6"
                  data-tooltip="Select which daraset to use for gene-gene interactions">Gene Gene Interactions:</h6>
            </div>
            <div class="column">
              <app-interaction-dataset-tile [datasetItems]="interactionGeneDatasetItems"
                                            [selectedDataset]="selectedInteractionGeneDataset"
                                            (selectedDatasetChange)="selectedInteractionGeneDataset = $event;
                                            createNetwork(selectedDataset, selectedInteractionGeneDataset, selectedCancerTypeItems)
">
              </app-interaction-dataset-tile>
            </div>
            <!-- Data Level Toggle END -->
          </div>
        </div>

        <div class="column is-12 has-text-centered">
          <!-- Cancer Type Selector START -->

          <div class="columns is-vcentered">
            <div class="column is-4 has-text-left">
              <h6 class="title is-6">Cancer Type:</h6>
            </div>
            <div class="column is-6">
              <app-cancertype-tile [cancerTypeItems]="cancerTypes"
                                   [selectedCancerTypeItems]="selectedCancerTypeItems"
                                   (selectedCancerTypeItemsChange)="selectedCancerTypeItems = $event;
                                                                    loadCancerTypeComorbiditesGraph();
                                   selectedCancerTypeItems.length ? createNetwork(selectedDataset, selectedInteractionGeneDataset, selectedCancerTypeItems) : false
              ">
              </app-cancertype-tile>
              <div *ngIf="nCancerGenesInSelectedCancerTypes" class="info">
                <p>{{ nCancerGenesInSelectedCancerTypes }} cancer driver genes found</p>
              </div>
            </div>
            <div class="column is-2">
            </div>
          </div>

          <div>
            <app-cancertype-comorbidities-tile
              [selectedCancerTypeItems]="selectedCancerTypeItems"
              [selectedCancerDataset]="selectedDataset"
              [selectedCancerTypeComorbidityGraph]="selectedCancerTypeComorbidityGraph"
              (selectedDisease)="addVisibleGenesBasedOnComorbidity($event)"
            >
            </app-cancertype-comorbidities-tile>
          </div>
          <!-- Cancer Type Selector END -->

        </div>

        <!-- Network Submit Button START -->
        <!--
        <div class="column is-12 has-text-centered">
          <app-button
            buttonText="Submit"
            (callbackFun)="createNetwork(selectedDataset, selectedInteractionGeneDataset, selectedCancerTypeItems)"
            [disabled]="(currentDataset == selectedDataset) &&
              (currentGeneInteractionDataset == selectedInteractionGeneDataset) &&
              (currentCancerTypeItems == selectedCancerTypeItems)"
          >
          </app-button>
        </div>
      -->
      <!-- Network Submit Button END -->


    </div>
      <!-- Data Selector END -->


      <!-- Network Overview START -->
      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
        <i class="fas fa-info" aria-hidden="true"></i>
      </span> Network Overview
          </p>
          <a (click)="collapseOverview= !collapseOverview" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
             <span class="icon">
              <i *ngIf="collapseOverview" class="fas fa-angle-down" aria-hidden="true"></i>
              <i *ngIf="!collapseOverview" class="fas fa-angle-left" aria-hidden="true"></i>
             </span>
          </a>
        </header>
        <div *ngIf="collapseOverview">
          <div class="card-content">
            <nav class="level" *ngIf="networkData">
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">Cancer
                    <br>Genes
                    <span class="icon has-tooltip-right has-text-black is-lowercase has-text-weight-normal is-size-6"
                          data-tooltip="Displayed cancer genes and available
                        cancer genes, see 'Filter Cancer Genes'">
                    <i class="fas fa-info-circle"></i>
                  </span>
                  </p>

                  <p class="title">
                    <span *ngIf="visibleCancerNodeCount!=cancerNodes.length">{{ visibleCancerNodeCount }} / </span>
                    {{ cancerNodes.length}}</p>
                </div>
              </div>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">
                    Genes
                    <span class="icon has-tooltip-bottom has-text-black is-lowercase has-text-weight-normal is-size-6"
                          data-tooltip="Only subgroup of genes is shown for performance reasons.
                          For the overview, just genes adjacent to cancer driver genes are considered">
                    <i class="fas fa-info-circle"></i>
                    </span>
                  </p>
                  <p class="title">
                    <span *ngIf="visibleNodeCount!=nodes.length">{{ visibleNodeCount }} / </span>
                    {{ nodes.length }}</p>
                </div>
              </div>
              <div class="level-item has-text-centered">
                <div>
                  <p class="heading">
                    Interactions
                  </p>
                  <p class="title">
                    <span *ngIf="currentViewEdges.size != interactionsTotalN">{{ currentViewEdges.size }} / </span>
                    {{ this.nodeData.edges.length }}</p>
                </div>
              </div>
            </nav>
          </div>
        </div>
      </div>
      <!-- Network Overview END -->

      <!-- Find Network START -->
      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-search" aria-hidden="true"></i>
              </span>
            Find network nodes
          </p>
          <a (click)="collapseQuery = !collapseQuery" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
           <span class="icon">
            <i *ngIf="collapseQuery" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseQuery" class="fas fa-angle-left" aria-hidden="true"></i>
           </span>
          </a>
        </header>
        <div *ngIf="collapseQuery">
          <div class="card-content">
            <div class="field">
              <div class="control">
                <app-query-tile-component [queryItems]="queryItems"
                                          (selectItem)="queryAction($event)"
                                          placeholder="Search..."
                                          removeOnSelect="false"
                ></app-query-tile-component>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Find Network END -->

      <!-- Filter Network START -->
      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-filter" aria-hidden="true"></i>
              </span>
            <span>Filter Cancer Driver Genes</span>
            <span class="icon has-tooltip-right has-text-black has-text-weight-normal is-size-6"
                  data-tooltip="Filter or load more Cancer Driver Genes into graph">
              <i class="fas fa-info-circle"></i>
            </span>
          </p>
          <a (click)="collapseBaitFilter = !collapseBaitFilter" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
              <span class="icon">
                <i *ngIf="collapseBaitFilter" class="fas fa-angle-down" aria-hidden="true"></i>
                <i *ngIf="!collapseBaitFilter" class="fas fa-angle-left" aria-hidden="true"></i>
              </span>
          </a>
        </header>
        <div *ngIf="collapseBaitFilter">

          <!-- Filter -->
          <div class="card-content">
            <div>
              <app-filter-tile (selectItem)="filterNodes()"
                               [checkboxes]="cancerNodesCheckboxes">
              </app-filter-tile>
            </div>

            <!-- "Add-to" Filter
            <br>
            <div>
              <app-query-tile-component [queryItems]="filterAddItems"
                                        (selectItem)="addFilterNode($event)"
                                        placeholder="Add..."
                                        removeOnSelect="true"
              >
              </app-query-tile-component>

            </div>
            -->
          </div>
          <footer class="card-footer">
            <a (click)="reset($event);" class="card-footer-item has-text-danger"
               data-tooltip="Remove filter and show all.">
              <span class="icon">
              <i class="fa fa-broom"></i>
              </span>
              <span>
                Show All
              </span>
            </a>
          </footer>
        </div>
      </div>
      <!-- Filter Network END -->

      <!--<div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-flask" aria-hidden="true"></i>
          </span>
            Simple Analysis
            <span class="icon has-tooltip-right has-text-black has-text-weight-normal is-size-6"
              data-tooltip="Select nodes in the network as seeds or use all cancer nodes as seeds">
              <i class="fas fa-info-circle"></i>
            </span>
          </p>
          <a (click)="collapseAnalysisQuick = !collapseAnalysisQuick" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseAnalysisQuick" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseAnalysisQuick" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseAnalysisQuick">
          <div class="card-content quick-find">
            <div class="field">
              <div class="control">
                <div class="columns is-centered">
                  <div class="column is-6 has-text-centered">
                    <div class="analysis-option" [ngClass]="{'selected': analysis.getCount() === 0 }">
                      <span>All Nodes</span>
                    </div>

                  </div>

                  <div class="column is-6 has-text-centered">
                    <div class="analysis-option" [ngClass]="{'selected': analysis.getCount() > 0 }">
                      <span>Selected Genes</span>
                    </div>
                  </div>

                </div>

                <div class="has-text-centered">
                  <button (click)="analysis.startQuickAnalysis(
                    true,
                    selectedDataset,
                    selectedInteractionGeneDataset,
                    selectedInteractionGeneDataset,
                    selectedCancerTypeItems
                    )"
                          [disabled]="analysis.isLaunchingQuick()"
                          *ngIf="analysis.getCount() === 0"
                          class="button is-primary has-tooltip" data-tooltip="Find drugs for all genes.">
                      <span class="icon">
                        <i class="fa fa-capsules" *ngIf="!analysis.isLaunchingQuick()"></i>
                        <i class="fa fa-spin fa-spinner" *ngIf="analysis.isLaunchingQuick()"></i>
                      </span>
                    <span>
                        Find Drugs
                      </span>
                  </button>

                  <button (click)="analysis.startQuickAnalysis(
                    false,
                    selectedDataset,
                    selectedInteractionGeneDataset,
                    selectedInteractionGeneDataset,
                    selectedCancerTypeItems
                    )"
                          *ngIf="analysis.getCount() > 0"
                          [disabled]="analysis.isLaunchingQuick()"
                          class="button is-primary has-tooltip"
                          data-tooltip="Find drugs for the selected genes.">
                      <span class="icon">
                        <i class="fa fa-capsules" *ngIf="!analysis.isLaunchingQuick()"></i>
                        <i class="fa fa-spin fa-spinner" *ngIf="analysis.isLaunchingQuick()"></i>
                      </span>
                    <span>
                        Find Drugs
                      </span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>-->

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-flask" aria-hidden="true"></i>
          </span>
            Analysis
            <span class="icon has-tooltip-right has-text-black has-text-weight-normal is-size-6"
                  data-tooltip="Run a sophisticated analysis based on selected nodes">
              <i class="fas fa-info-circle"></i>
            </span>
          </p>
          <a (click)="collapseAnalysis = !collapseAnalysis" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseAnalysis" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseAnalysis" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseAnalysis">
          <div class="card-content">
            <div class="field">
              <div class="control">

                <div class="columns mb-0">
                  <div class="column is-half has-text-centered">
                    <div class="analysis-option has-text-weight-bold example">
                      <span>Quick Start</span>
                    </div>
                  </div>
                  <div class="column is-half has-text-centered">
                    <div class="analysis-option has-text-weight-bold" [ngClass]="{'selected': analysis.getCount() > 0 }">
                      <span>Select Genes
                        <i class="fa fa-check" *ngIf="analysis.getCount() > 0"></i>
                      </span>
                    </div>
                  </div>
                </div>

                <div class="columns mb-0">
                  <div class="column is-half has-text-centered">
                    <button (click)="exampleSearch('drug-target'); closeSummary();"
                            class="button is-example is-fullwidth has-tooltip"
                            data-tooltip="Find drug targets for the all cancer driver genes.">
                    <span>
                      Quick Target Search
                    </span>
                    </button>
                  </div>
                  <div class="column is-half has-text-centered">
                    <button (click)="analysisDialogTarget = 'drug-target'; showAnalysisDialog = true; closeSummary();"
                            class="button is-primary is-fullwidth has-tooltip"
                            data-tooltip="Find drug targets for the selected genes."
                            [disabled]="analysis.getCount() === 0">
                    <span class="icon">
                      <i class="fa fa-crosshairs"></i>
                    </span>
                      <span>
                      Find Drug Targets
                    </span>
                    </button>
                  </div>
                </div>

                <div class="columns mb-0">
                  <div class="column is-half has-text-centered">
                    <button (click)="exampleSearch('drug'); closeSummary();"
                    class="button is-example is-fullwidth has-tooltip"
                    data-tooltip="Find drugs for the cancer driver genes.">
                      <span>
                        Quick Drug Search
                      </span>
                    </button>
                  </div>
                  <div class="column is-half has-text-centered">
                    <button (click)="analysisDialogTarget = 'drug'; showAnalysisDialog = true; closeSummary();"
                    class="button is-primary is-fullwidth has-tooltip"
                    data-tooltip="Find drugs for the selected genes."
                    [disabled]="analysis.getCount() === 0">
                      <span class="icon">
                        <i class="fa fa-capsules"></i>
                      </span>
                        <span>
                        Find Drugs
                      </span>
                    </button>
                  </div>
                </div>

                <div class="columns">
                  <div class="column is-half has-text-centered">

                  </div>
                  <div class="column is-half has-text-centered">
                    <a *ngIf="analysis.getCount() > 0" [href]="gProfilerLink()" target="_blank"
                      class="button is-primary is-fullwidth has-tooltip"
                      data-tooltip="Use enrichment analysis via g:Profiler (external).">
                   <span class="icon">
                     <i class="fa fa-external-link-alt"></i>
                   </span>
                     <span>
                     Enrichment Analysis
                   </span>
                   </a>
                   <a *ngIf="analysis.getCount() === 0" disabled
                      class="button is-primary is-fullwidth has-tooltip"
                      data-tooltip="Use enrichment analysis via g:Profiler (external).">
                   <span class="icon">
                     <i class="fa fa-external-link-alt"></i>
                   </span>
                     <span>
                     Enrichment Analysis
                   </span>
                   </a>
                  </div>
                </div>

              </div>
            </div>
            
          </div>
        </div>
      </div>

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-filter" aria-hidden="true"></i>
          </span> Selection ({{analysis.getCount()}})
          </p>
          <a (click)="collapseSelection = !collapseSelection" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseSelection" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseSelection" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseSelection" class="seed-selection">
          <div class="card-content overflow">
            <table class="table selection-table is-fullwidth" *ngIf="analysis.getCount() > 0">
              <thead>
              <tr>
                <td>Type</td>
                <td>Name</td>
                <td>Entrez ID</td>
                <td>Uniprot Ac</td>
                <td>Actions</td>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let g of analysis.getSelection()">
                <td>
                 <span>
                    <i class="fa fa-dna" *ngIf="g.type == 'Node'">&nbsp;Gene</i>
                    <i class="fa fa-disease" *ngIf="g.type =='CancerNode'">&nbsp;Cancer&nbsp;Gene</i>
                    <i class="fa fa-capsules" *ngIf="g.type =='Drug'">&nbsp;Drug</i>
                  </span>
                </td>
                <td>{{g.data.name}}</td>
                <td>{{g.data.entrezId}}</td>
                <td>{{g.data.uniprotAc}}</td>
                <td>
                  <button (click)="analysis.removeItems([g])" class="button is-small is-danger is-outlined has-tooltip"
                          data-tooltip="Remove from selection.">
                    <i class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
              </tbody>
            </table>
            <i *ngIf="analysis.getCount() === 0">
              Double-click on a node to select it for the analysis.
            </i>
          </div>

          <footer class="card-footer">
            <a (click)="analysis.addVisibleGenes(currentViewNodes, currentViewGenes)"
               class="card-footer-item has-text-success" data-tooltip="Add all visible genes.">
            <span class="icon">
              <i class="fa fa-plus"></i>
            </span>
              <span>Add genes</span>
            </a>
            <a (click)="analysis.removeAllNodes()"
               class="card-footer-item has-text-danger" data-tooltip="Remove all genes.">
            <span class="icon">
              <i class="fa fa-minus"></i>
            </span>
              <span>Remove genes</span>
            </a>
          </footer>

          <footer class="card-footer">
            <a (click)="analysis.addVisibleCancerDriverGenes(currentViewNodes, currentViewCancerGenes)"
               class="card-footer-item has-text-success" data-tooltip="Add all visible cancer driver genes.">
            <span class="icon">
              <i class="fa fa-plus"></i>
            </span>
              <span>Add cancer driver genes</span>
            </a>
            <a (click)="analysis.removeAllCancerDriverNodes()"
               class="card-footer-item has-text-danger" data-tooltip="Remove all cancer driver genes.">
            <span class="icon">
              <i class="fa fa-minus"></i>
            </span>
              <span>Remove cancer driver genes</span>
            </a>
          </footer>

          <footer class="card-footer" *ngIf="selectedAnalysisToken">
            <a (click)="analysis.addSeeds(currentViewNodes)"
               class="card-footer-item has-text-success" data-tooltip="Add all visible seeds.">
            <span class="icon">
              <i class="fa fa-plus"></i>
            </span>
              <span>
              Add seeds
            </span>
            </a>
            <a (click)="analysis.removeSeeds(currentViewNodes)"
               class="card-footer-item has-text-danger" data-tooltip="Remove all seeds.">
            <span class="icon">
              <i class="fa fa-minus"></i>
            </span>
              <span>
              Remove seeds
            </span>
            </a>
          </footer>

          <footer class="card-footer">
<!--            <a (click)="analysis.addItems(wrapCancerNodes(cancerNodes));-->
<!--            analysis.addItems(wrapCancerNodes(cancerNodesSup))"-->
<!--               class="card-footer-item has-text-success"-->
<!--               data-tooltip="Add cancer driver genes for selected cancer tpyes">-->
<!--            <span class="icon">-->
<!--              <i class="fa fa-plus"></i>-->
<!--            </span>-->
<!--              <span>Add cancer driver genes from DB</span>-->
<!--            </a>-->

            <a (click)="analysis.invertSelection(currentViewNodes)" class="card-footer-item has-text-primary"
               data-tooltip="Invert the current selection.">
            <span class="icon">
              <i class="fa fa-sync"></i>
            </span>
              <span>
              Invert
            </span>
            </a>
            <a (click)="showThresholdDialog = true"
               class="card-footer-item has-text-primary"
               data-tooltip="Add genes expressed in the expressionCancerType.">
            <span class="icon">
              <i class="fa fa-angle-double-up"></i>
            </span>
              <span>
              ExpressionCancerType genes
            </span>
            </a>
          </footer>

          <footer class="card-footer">
            <a (click)="showDiseaseSelectionDialog = true"
               class="card-footer-item has-text-primary"
               data-tooltip="Add genes based on their occurance in diseases.">
            <span class="icon">
              <i class="fa fa-upload"></i>
            </span>
              <span>
              Disease genes
            </span>
            </a>
            <a (click)="showCustomGenesDialog = true"
               class="card-footer-item has-text-primary"
               data-tooltip="Add a custom list of genes.">
            <span class="icon">
              <i class="fa fa-upload"></i>
            </span>
              <span>
              Custom genes
            </span>
            </a>
          </footer>

          <footer class="card-footer">
            <a (click)="addSelectionToNetwork()" class="card-footer-item has-text-primary"
               data-tooltip="Add genes from selection to network.">
              <span class="icon">
                <i class="fa fa-project-diagram"></i>
              </span>
              <span>
              Add to Network
              </span>
            </a>

            <a (click)="showVCFInput = true" class="card-footer-item has-text-primary"
               data-tooltip="Add genes from VCF-file to selection.">
              <span class="icon">
                <i class="fa fa-upload"></i>
              </span>
              <span>
              Upload VCF
              </span>
            </a>

          </footer>

          <footer class="card-footer">
            <a (click)="analysis.resetSelection()" class="card-footer-item has-text-danger"
               data-tooltip="Remove all entries from the selection.">
            <span class="icon">
              <i class="fa fa-broom"></i>
            </span>
              <span>
              Reset
            </span>
            </a>

          </footer>
        </div>
      </div>

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-tasks" aria-hidden="true"></i>
          </span>
            Tasks ({{analysis.tasks.length}})
          </p>
          <a (click)="collapseTask = !collapseTask" data-action="collapse" class="card-header-icon is-hidden-fullscreen"
             aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseTask" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseTask" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseTask">
          <div class="card-content overflow" *ngIf="analysis.tasks && analysis.tasks.length > 0">
            <app-task-list
              [taskList]="analysis.tasks"
              (tokenChange)="setTaskToken($event)"
            >
            </app-task-list>
          </div>
          <footer class="card-footer">
            <a *ngIf="analysis.tasks && analysis.tasks.length > 0"
               (click)="analysis.removeAllTasks(); selectedAnalysisToken = null;"
               class="card-footer-item has-text-danger" data-tooltip="Delete all tasks.">
            <span class="icon">
                <i class="fa fa-trash"></i>
              </span>
              <span>
                Delete all
              </span>
            </a>
          </footer>
        </div>
      </div>


    </div>
  </div>
</div>

<div class="is-hidden-tablet mobile-fallback">
  Sorry, caddie is not available for mobile phones.
  To find information about caddie, please check the <a routerLink="/about">About</a> page or visit this page
  with another device with a larger screen.
</div>
