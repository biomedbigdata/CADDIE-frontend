<div class="is-hidden-mobile">
  <app-launch-analysis [(show)]="showAnalysisDialog"
                       [target]="analysisDialogTarget"
                       [dataset]="selectedDataset">
  </app-launch-analysis>

  <app-custom-genes [(show)]="showCustomGenesDialog" [visibleNodes]="currentViewNodes">
  </app-custom-genes>

  <app-add-expressed-genes [(show)]="showThresholdDialog"
                           [selectedTissue]="currentViewSelectedTissue"
                           [visibleNodes]="currentViewNodes"
                           [currentViewProteins]="currentViewGenes">
  </app-add-expressed-genes>

  <div class="covex explorer">

    <!-- Data Selector START -->
    <div class="columns is-multiline is-centered">
      <div class="column is-1"></div>

      <div class="column is-3">
        <!-- Dataset Selector START -->
        <h5 class="title is-5">Dataset</h5>
        <app-dataset-tile [datasetItems]="datasetItems" [selectedDataset]="selectedDataset"
                          (selectedDatasetChange)="selectedDataset = $event; initCancerTypes(selectedDataset)">
        </app-dataset-tile>
        <!-- Dataset Selector END -->
      </div>
      <div class="column is-3">
        <!-- Cancer Type Selector START -->
        <h5 class="title is-5">Cancer Type</h5>
        <app-cancertype-tile [cancerTypeItems]="cancerTypes" [selectedCancerTypeItems]="selectedCancerTypeItems"
                             (selectedCancerTypeItemsChange)="selectedCancerTypeItems = $event">
        </app-cancertype-tile>
        <!-- Cancer Type Selector END -->
      </div>
      <div class="column iis-3">
        <!-- Data Level Toggle START -->
        <h5 class="title is-5" data-tooltip="Decide whether to use genes or proteins">Data Level</h5>
        <app-data-level-toggle
          class=""
          textGene="Gene"
          textProtein="Protein"
          tooltipGene="Show Gene-Gene interactions in network"
          tooltipProtein="Show Protein-Protein interactions in network"

          [value]="true"
          (valueChange)="updateDataLevel($event)">

        </app-data-level-toggle>
        <!-- Data Level Toggle END -->
      </div>
      <div class="column is-3">
        <!-- Network Submit Button START -->
        <app-button
          buttonText="Submit"
          (callbackFun)="createNetwork(selectedDataset, selectedDataLevel, selectedCancerTypeItems)"
        >
        </app-button>
        <!-- Network Submit Button END -->
      </div>

      <div class="column is-1"></div>
    </div>
    <!-- Data Selector END -->

    <div class="covex left-window">
      <div>

        <!-- Panel Left START -->
        <div class="covex sidebar bar-left">

          <!-- Dataset Selector START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-database" aria-hidden="true"></i>
              </span> Choose Dataset
              </p>
              <a (click)="collapseData = !collapseData" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen"
                 aria-label="more options">
             <span class="icon">
            <i *ngIf="collapseData" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseData" class="fas fa-angle-left" aria-hidden="true"></i>
             </span>
              </a>
            </header>
            <div *ngIf="collapseData">
              <div class="card-content">
                <app-dataset-tile [datasetItems]="datasetItems" [selectedDataset]="selectedDataset"
                                  (selectedDatasetChange)="selectedDataset = $event; initCancerTypes(selectedDataset)">
                </app-dataset-tile>
              </div>
            </div>
          </div>
          <!-- Dataset Selector END -->

          <!-- Cancer Type Selector START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-database" aria-hidden="true"></i>
              </span> Choose Cancer Types
              </p>
              <a (click)="collapseType = !collapseType" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen"
                 aria-label="more options">
             <span class="icon">
            <i *ngIf="collapseType" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseType" class="fas fa-angle-left" aria-hidden="true"></i>
             </span>
              </a>
            </header>
            <div *ngIf="collapseType">
              <div class="card-content">
                <app-cancertype-tile [cancerTypeItems]="cancerTypes" [selectedCancerTypeItems]="selectedCancerTypeItems"
                                     (selectedCancerTypeItemsChange)="selectedCancerTypeItems = $event">
                </app-cancertype-tile>
              </div>
            </div>
          </div>
          <!-- Cancer Type Selector END -->

          <!-- Data Level Toggle START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-database" aria-hidden="true"></i>
              </span> Choose Data Level
              </p>
              <a (click)="collapseLevel = !collapseLevel" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen"
                 aria-label="more options">
             <span class="icon">
            <i *ngIf="collapseLevel" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseLevel" class="fas fa-angle-left" aria-hidden="true"></i>
             </span>
              </a>
            </header>
            <div *ngIf="collapseLevel">
              <div class="card-content">
                <app-data-level-toggle
                  class="footer-buttons"
                  textGene="Gene"
                  textProtein="Protein"
                  tooltipGene="Show Gene-Gene interactions in network"
                  tooltipProtein="Show Protein-Protein interactions in network"

                  [value]="true"
                  (valueChange)="updateDataLevel($event)">

                </app-data-level-toggle>
              </div>
            </div>
          </div>
          <!-- Data Level Toggle END -->

          <!-- Network Submit Button START -->
          <app-button
            buttonText="Submit"
            (callbackFun)="createNetwork(selectedDataset, selectedDataLevel, selectedCancerTypeItems)"
          >
          </app-button>
          <!-- Network Submit Button END -->

          <!-- Search Overview START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
                <span class="icon">
                  <i class="fas fa-info" aria-hidden="true"></i>
                </span> Search Overview
              </p>
              <a (click)="collapseOverview= !collapseOverview" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen" aria-label="more options">
             <span class="icon">
              <i *ngIf="collapseOverview" class="fas fa-angle-down" aria-hidden="true"></i>
              <i *ngIf="!collapseOverview" class="fas fa-angle-left" aria-hidden="true"></i>
             </span>
              </a>
            </header>
            <div *ngIf="collapseOverview">
              <div class="card-content">
                <nav class="level" *ngIf="networkData">
                  <div class="level-item has-text-centered">
                    <div>
                      <p *ngIf="currentDataLevel=='gene'" class="heading">Cancer<br>Genes</p>
                      <p *ngIf="currentDataLevel=='protein'" class="heading">Cancer<br>Proteins</p>
                      <p class="title"> {{ cancerNodesSup.length }}</p>
                    </div>
                  </div>
                  <div class="level-item has-text-centered">
                    <div>
                      <p *ngIf="currentDataLevel=='gene'" class="heading">Genes</p>
                      <p *ngIf="currentDataLevel=='protein'" class="heading">Proteins</p>
                      <p class="title">{{ nodesSup.length }}</p>
                    </div>
                  </div>
                  <div class="level-item has-text-centered">
                    <div>
                      <p class="heading">Interactions</p>
                      <p class="title">{{ interactionsSup.length }}</p>
                    </div>
                  </div>
                </nav>
              </div>
            </div>
          </div>
          <!-- Search Overview END -->

          <!-- Network Overview START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
          <span class="icon">
        <i class="fas fa-info" aria-hidden="true"></i>
      </span> Network Overview
              </p>
              <a (click)="collapseOverview= !collapseOverview" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen" aria-label="more options">
             <span class="icon">
              <i *ngIf="collapseOverview" class="fas fa-angle-down" aria-hidden="true"></i>
              <i *ngIf="!collapseOverview" class="fas fa-angle-left" aria-hidden="true"></i>
             </span>
              </a>
            </header>
            <div *ngIf="collapseOverview">
              <div class="card-content">
                <nav class="level" *ngIf="networkData">
                  <div class="level-item has-text-centered">
                    <div>
                      <p *ngIf="currentDataLevel=='gene'" class="heading">Cancer<br>Genes</p>
                      <p *ngIf="currentDataLevel=='protein'" class="heading">Cancer<br>Proteins</p>
                      <p class="title"> {{ networkData.cancerNodes.length }}</p>
                    </div>
                  </div>
                  <div class="level-item has-text-centered">
                    <div>
                      <p *ngIf="currentDataLevel=='gene'" class="heading">Genes</p>
                      <p *ngIf="currentDataLevel=='protein'" class="heading">Proteins</p>
                      <p class="title">{{ networkData.nodes.length }}</p>
                    </div>
                  </div>
                  <div class="level-item has-text-centered">
                    <div>
                      <p class="heading">Interactions</p>
                      <p class="title">{{ networkData.edges.length }}</p>
                    </div>
                  </div>
                </nav>
              </div>
            </div>
          </div>
          <!-- Network Overview END -->

          <!-- Query Network START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-search" aria-hidden="true"></i>
              </span>
                Query network nodes
              </p>
              <a (click)="collapseQuery = !collapseQuery" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen" aria-label="more options">
           <span class="icon">
            <i *ngIf="collapseQuery" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseQuery" class="fas fa-angle-left" aria-hidden="true"></i>
           </span>
              </a>
            </header>
            <div *ngIf="collapseQuery">
              <div class="card-content">
                <div class="field">
                  <div class="control">
                    <app-query-tile-component [queryItems]="queryItems"
                                              [dataLevel]="currentDataLevel"
                                              (selectItem)="queryAction($event)"></app-query-tile-component>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Query Network END -->

          <!-- Filter Network START -->
          <div class="card bar-large">
            <header class="card-header">
              <p class="card-header-title">
              <span class="icon">
                <i class="fas fa-filter" aria-hidden="true"></i>
              </span>
                <span *ngIf="currentDataLevel=='gene'">Filter Cancer Driver Genes</span>
                <span *ngIf="currentDataLevel=='protein'">Filter Cancer Proteins</span>
              </p>
              <a (click)="collapseBaitFilter = !collapseBaitFilter" data-action="collapse"
                 class="card-header-icon is-hidden-fullscreen" aria-label="more options">
              <span class="icon">
                <i *ngIf="collapseBaitFilter" class="fas fa-angle-down" aria-hidden="true"></i>
                <i *ngIf="!collapseBaitFilter" class="fas fa-angle-left" aria-hidden="true"></i>
              </span>
              </a>
            </header>
            <div *ngIf="collapseBaitFilter">

              <!-- Filter -->
              <div class="card-content overflow">
                <div>
                  <app-filter-tile (selectItem)="filterNodes()"
                                   [checkboxes]="cancerNodesCheckboxes">
                  </app-filter-tile>
                </div>

                <!-- Add to Filter -->
                <div class="field">
                  <div class="control">
                    <app-query-tile-component [queryItems]="filterAddItems"
                                              [dataLevel]="currentDataLevel"
                                              (selectItem)="addFilterNode($event)"></app-query-tile-component>
                  </div>
                </div>


              </div>
              <footer class="card-footer">
                <a (click)="reset($event);" class="card-footer-item has-text-danger"
                   data-tooltip="Remove filter and show all.">
              <span class="icon">
              <i class="fa fa-broom"></i>
              </span>
                    <span>
                Show All
              </span>
                </a>
              </footer>
            </div>
          </div>
          <!-- Filter Network END -->


        </div> <!-- Panel Left END -->


        <div class="covex network">
          <div class="card network">
            <header class="card-header">
              <p *ngIf="currentDataLevel == 'gene'" class="card-header-title">Gene-Gene Interaction Network</p>
              <p *ngIf="currentDataLevel == 'protein'" class="card-header-title">Protein-Protein Interaction Network</p>
            </header>
            <div class="card-content">
              <div class="card-image" id="canvas-content">
                <div class="parent">
                  <div class="network center image1" #network>
                    <button class="button is-loading center" alt="loading...">Loading</button>
                  </div>
                  <div class="image2">
                    <!-- <img src="assets/leg1.png" width="180px"/> -->
                  </div>
                </div>
              </div>

              <footer class="card-footer toolbar">
                <button (click)="toCanvas()" class="button is-primary has-tooltip"
                        data-tooltip="Take a screenshot of the current network.">
                <span class="icon">
                  <i class="fas fa-camera" aria-hidden="true"></i>
                </span> <span>Screenshot</span>
                </button>

                <div class="footer-buttons dropdown is-up" [class.is-active]="expressionExpanded">
                  <div class="dropdown-trigger">
                    <button (click)="expressionExpanded=!expressionExpanded"
                            class="button is-primary" [class.is-outlined]="!selectedTissue"
                            aria-haspopup="true" aria-controls="dropdown-menu"
                            data-tooltip="Tissue expression data is provided by the GTEx project.">
                      <span *ngIf="!selectedTissue">Tissue</span>
                      <span *ngIf="selectedTissue">{{selectedTissue.name}}</span>
                      <span class="icon is-small">
                      <i class="fas"
                         [class.fa-angle-up]="expressionExpanded"
                         [class.fa-angle-left]="!expressionExpanded" aria-hidden="true"></i>
                    </span>
                    </button>
                  </div>
                  <div class="dropdown-menu" id="dropdown-menu" role="menu">
                    <div class="dropdown-content tissue-dropdown">
                      <div class="scroll-area">
                        <a (click)="selectTissue(null)"
                           [class.is-active]="!selectedTissue"
                           class="dropdown-item">
                          None
                        </a>
                        <a *ngFor="let tissue of analysis.getTissues()"
                           (click)="selectTissue(tissue)"
                           [class.is-active]="selectedTissue && tissue.id === selectedTissue.id"
                           class="dropdown-item">
                          {{tissue.name}}
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <app-toggle class="footer-buttons" textOn="Animation On" textOff="Off"
                            tooltipOn="Enable the network animation."
                            tooltipOff="Disable the network animation and freeze nodes."
                            [value]="physicsEnabled" (valueChange)="updatePhysicsEnabled($event)"></app-toggle>
              </footer>
            </div>
          </div>
        </div>
      </div>

      <div class="analysis-view" *ngIf="selectedAnalysisToken">
        <app-analysis-panel [(token)]="selectedAnalysisToken"
                            (showDetailsChange)="selectedWrapper = $event"
                            (visibleItems)="analysisWindowChanged($event)"></app-analysis-panel>
      </div>
    </div>

    <div class="covex sidebar bar-right">
      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i *ngIf="!selectedWrapper" class="fas fa-info" aria-hidden="true"></i>
            <i *ngIf="selectedWrapper && selectedWrapper.type === 'node'" class="fas fa-dna" aria-hidden="true"></i>
            <i *ngIf="selectedWrapper && selectedWrapper.type === 'cancerNode'" class="fas fa-virus"
               aria-hidden="true"></i>
            <i *ngIf="selectedWrapper && selectedWrapper.type === 'drug'" class="fas fa-capsules"
               aria-hidden="true"></i>
          </span>
            <span *ngIf="!selectedWrapper">No item selected</span>
            <span *ngIf="selectedWrapper">
            <span *ngIf="selectedWrapper.type === 'node'">
              <span *ngIf="currentDataLevel === 'gene'">
                Gene
              </span>
              <span *ngIf="currentDataLevel === 'protein'">
                Protein
              </span>
            </span>
            <span *ngIf="selectedWrapper.type === 'cancerNode'">
              <span *ngIf="currentDataLevel === 'gene'">
                Cancer Driver Gene
              </span>
              <span *ngIf="currentDataLevel === 'protein'">
                Cancer Protein
              </span>
            </span>
            <span *ngIf="selectedWrapper.type === 'drug'">Drug</span>
          </span>
          </p>
          <a (click)="collapseDetails = !collapseDetails" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseDetails" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseDetails" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseDetails">
          <div class="card-content">
            <app-info-tile [wrapper]="selectedWrapper"></app-info-tile>
          </div>
        </div>
      </div>

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-flask" aria-hidden="true"></i>
          </span>
            Simple Analysis
          </p>
          <a (click)="collapseAnalysisQuick = !collapseAnalysisQuick" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseAnalysisQuick" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseAnalysisQuick" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseAnalysisQuick">
          <div class="card-content quick-find">
            <div class="field">
              <div class="control">
                <div class="tile notification is-danger">
                  <div class="align-vmiddle">
                    <div class="digit"><i class="fa fa-fast-forward"></i></div>
                    <button (click)="analysis.startQuickAnalysis(true, selectedDataset, selectedCancerTypeItems)"
                            [disabled]="analysis.isLaunchingQuick()"
                            class="button is-white has-tooltip" data-tooltip="Find drugs for all genes.">
                    <span class="icon">
                      <i class="fa fa-capsules" *ngIf="!analysis.isLaunchingQuick()"></i>
                      <i class="fa fa-spin fa-spinner" *ngIf="analysis.isLaunchingQuick()"></i>
                    </span>
                      <span>
                      Quick Start
                    </span>
                    </button>
                  </div>
                </div>
                <div class="divisor-rapid">
                  &mdash; or &mdash;
                </div>
                <div class="tile notification is-info">
                  <div class="align-vmiddle">
                    <div class="digit" *ngIf="analysis.getCount() == 0">1</div>
                    <div class="digit" *ngIf="analysis.getCount() > 0"><i class="fa fa-check"></i></div>
                    <div>
                      <span *ngIf="currentDataLevel=='gene'">Select Genes</span>
                      <span *ngIf="currentDataLevel=='protein'">Select Proteins</span>
                    </div>
                  </div>
                </div>
                <div class="tile notification is-info">
                  <div class="align-vmiddle">
                    <div class="digit">2</div>
                    <button (click)="analysis.startQuickAnalysis(false, selectedDataset, selectedCancerTypeItems)"
                            [disabled]="analysis.getCount() === 0 || analysis.isLaunchingQuick()"
                            class="button is-white has-tooltip"
                            data-tooltip="Find drugs for the selected genes.">
                    <span class="icon">
                      <i class="fa fa-capsules" *ngIf="!analysis.isLaunchingQuick()"></i>
                      <i class="fa fa-spin fa-spinner" *ngIf="analysis.isLaunchingQuick()"></i>
                    </span>
                      <span>
                      Find Drugs
                    </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-filter" aria-hidden="true"></i>
          </span> Selection ({{analysis.getCount()}})
          </p>
          <a (click)="collapseSelection = !collapseSelection" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseSelection" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseSelection" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseSelection" class="seed-selection">
          <div class="card-content overflow">
            <table class="table selection-table" *ngIf="analysis.getCount() > 0">
              <thead>
              <tr>
                <td>Type</td>
                <td>Name</td>
                <td>Actions</td>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let g of analysis.getSelection()">
                <td>
                 <span class="icon">
                    <i class="fa fa-dna" *ngIf="g.type == 'node'"></i>
                    <i class="fa fa-virus" *ngIf="g.type =='cancerNode'"></i>
                  </span>
                </td>
                <td *ngIf="g.type == 'cancerNode'">{{g.data.name}}</td>
                <td *ngIf="g.type == 'node'">{{g.data.name}}</td>
                <td>
                  <button (click)="analysis.removeItems([g])" class="button is-small is-danger is-outlined has-tooltip"
                          data-tooltip="Remove from selection.">
                    <i class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
              </tbody>
            </table>
            <i *ngIf="analysis.getCount() === 0">
              Double-click on a protein to select it for the analysis.
            </i>
          </div>

          <footer class="card-footer">
            <a (click)="analysis.addVisibleGenes(currentViewNodes, currentViewGenes)"
               class="card-footer-item has-text-success" data-tooltip="Add all visible genes.">
            <span class="icon">
              <i class="fa fa-plus"></i>
            </span>
              <span>
              Add genes
            </span>
            </a>
            <a (click)="analysis.removeAllGenes()"
               class="card-footer-item has-text-danger" data-tooltip="Remove all genes.">
            <span class="icon">
              <i class="fa fa-minus"></i>
            </span>
              <span>
              Remove genes
            </span>
            </a>
          </footer>

          <footer class="card-footer">
            <a (click)="analysis.addVisibleCancerDriverGenes(currentViewNodes, currentViewCancerNodes)"
               class="card-footer-item has-text-success" data-tooltip="Add all visible cancer driver genes.">
            <span class="icon">
              <i class="fa fa-plus"></i>
            </span>
              <span>
              Add cancer driver genes
            </span>
            </a>
            <a (click)="analysis.removeAllCancerDriverGenes()"
               class="card-footer-item has-text-danger" data-tooltip="Remove all cancer driver genes.">
            <span class="icon">
              <i class="fa fa-minus"></i>
            </span>
              <span>
              Remove cancer driver genes
            </span>
            </a>
          </footer>

          <footer class="card-footer" *ngIf="selectedAnalysisToken">
            <a (click)="analysis.addSeeds(currentViewNodes)"
               class="card-footer-item has-text-success" data-tooltip="Add all visible seeds.">
            <span class="icon">
              <i class="fa fa-plus"></i>
            </span>
              <span>
              Add seeds
            </span>
            </a>
            <a (click)="analysis.removeSeeds(currentViewNodes)"
               class="card-footer-item has-text-danger" data-tooltip="Remove all seeds.">
            <span class="icon">
              <i class="fa fa-minus"></i>
            </span>
              <span>
              Remove seeds
            </span>
            </a>
          </footer>

          <footer class="card-footer">
            <a (click)="showCustomGenesDialog = true"
               class="card-footer-item has-text-primary"
               data-tooltip="Add a custom list of genes.">
            <span class="icon">
              <i class="fa fa-upload"></i>
            </span>
              <span>
              Custom genes
            </span>
            </a>
            <a (click)="showThresholdDialog = true"
               class="card-footer-item has-text-primary"
               data-tooltip="Add genes expressed in the tissue.">
            <span class="icon">
              <i class="fa fa-angle-double-up"></i>
            </span>
              <span>
              Tissue genes
            </span>
            </a>
          </footer>

          <footer class="card-footer">
            <a (click)="analysis.invertSelection(currentViewNodes)" class="card-footer-item has-text-primary"
               data-tooltip="Invert the current selection.">
            <span class="icon">
              <i class="fa fa-sync"></i>
            </span>
              <span>
              Invert
            </span>
            </a>
            <a (click)="analysis.resetSelection()" class="card-footer-item has-text-danger"
               data-tooltip="Remove all entries from the selection.">
            <span class="icon">
              <i class="fa fa-broom"></i>
            </span>
              <span>
              Reset
            </span>
            </a>
          </footer>

        </div>
      </div>

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-flask" aria-hidden="true"></i>
          </span>
            Advanced Analysis
          </p>
          <a (click)="collapseAnalysis = !collapseAnalysis" data-action="collapse"
             class="card-header-icon is-hidden-fullscreen" aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseAnalysis" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseAnalysis" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseAnalysis">
          <div class="card-content">
            <div class="field">
              <div class="control">
                <button (click)="analysisDialogTarget = 'drug-target'; showAnalysisDialog = true;"
                        class="button is-primary is-fullwidth has-tooltip"
                        data-tooltip="Find drug targets for the selected genes."
                        [disabled]="analysis.getCount() === 0">
                <span class="icon">
                  <i class="fa fa-crosshairs"></i>
                </span>
                  <span>
                  Find Drug Targets
                </span>
                </button>
              </div>
            </div>
            <div class="field">
              <div class="control">
                <button (click)="analysisDialogTarget = 'drug'; showAnalysisDialog = true;"
                        class="button is-primary is-fullwidth has-tooltip"
                        data-tooltip="Find drugs for the selected genes."
                        [disabled]="analysis.getCount() === 0">
                <span class="icon">
                  <i class="fa fa-capsules"></i>
                </span>
                  <span>
                  Find Drugs
                </span>
                </button>
              </div>
            </div>
            <div class="field">
              <div class="control">
                <a *ngIf="analysis.getCount() > 0" [href]="gProfilerLink()" target="_blank"
                   class="button is-primary is-fullwidth  has-tooltip"
                   data-tooltip="Use enrichment analysis via g:Profiler (external).">
                <span class="icon">
                  <i class="fa fa-external-link-alt"></i>
                </span>
                  <span>
                  Enrichment Analysis
                </span>
                </a>
                <a *ngIf="analysis.getCount() === 0" disabled
                   class="button is-primary is-fullwidth has-tooltip"
                   data-tooltip="Use enrichment analysis via g:Profiler (external).">
                <span class="icon">
                  <i class="fa fa-external-link-alt"></i>
                </span>
                  <span>
                  Enrichment Analysis
                </span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card bar-large">
        <header class="card-header">
          <p class="card-header-title">
          <span class="icon">
            <i class="fas fa-tasks" aria-hidden="true"></i>
          </span>
            Tasks ({{analysis.tasks.length}})
          </p>
          <a (click)="collapseTask = !collapseTask" data-action="collapse" class="card-header-icon is-hidden-fullscreen"
             aria-label="more options">
          <span class="icon">
            <i *ngIf="collapseTask" class="fas fa-angle-down" aria-hidden="true"></i>
            <i *ngIf="!collapseTask" class="fas fa-angle-left" aria-hidden="true"></i>
          </span>
          </a>
        </header>
        <div *ngIf="collapseTask">
          <div class="card-content overflow" *ngIf="analysis.tasks && analysis.tasks.length > 0">
            <app-task-list [(token)]="selectedAnalysisToken"></app-task-list>
          </div>
          <footer class="card-footer">
            <a *ngIf="analysis.tasks && analysis.tasks.length > 0"
               (click)="analysis.removeAllTasks(); selectedAnalysisToken = null;"
               class="card-footer-item has-text-danger" data-tooltip="Delete all tasks.">
            <span class="icon">
                <i class="fa fa-trash"></i>
              </span>
              <span>
                Delete all
              </span>
            </a>
          </footer>
        </div>
      </div>


    </div>
  </div>
</div>

<div class="is-hidden-tablet mobile-fallback">
  Sorry, CoVex is not available for mobile phones.
  To find information about CoVex, please check the <a routerLink="/about">About</a> page or visit this page
  with another device with a larger screen.
</div>
